<section class="container-outer authority entity" *ngIf="loading">
	<section class="container">
		<div class="entity-title">{{indicator}}</div>
		<div *ngIf="error">Error: {{error}}</div>
		<div *ngIf="!error">Loading...</div>
	</section>
</section>

<section class="container-outer authority entity" *ngIf="!loading">

	<section class="container">
		<div class="entity-title">{{indicator}}</div>
	</section>

	<section class="container container-margin">
		<h2>{{indicator}}</h2>
		<slider
				[min]="startYear"
				[max]="endYear"
				[startValue]="startYear"
				[endValue]="endYear"
				stepValue="1"
				defaultWidth="934"
				(onSliderChange)="onSliderChange($event)">
		</slider>
		<div class="container slab-beta-light container-padded-large">
			<div class="container">
				<div class="container-left-6">
					<graph indicator-histogram [data]="vis.lots_in_years" [indicator]="indicator"></graph>
					<br/>
					<graph indicator-structure [data]="vis.indicators" [indicator]="indicator"></graph>
				</div>
				<div class="container-left-6">
					<graph indicator-sectors [data]="vis.cpvs_codes" [indicator]="indicator"></graph>
				</div>
			</div>
		</div>
	</section>

	<section class="container container-margin">
		<div class="container">
			<div class="container-left-6" *ngIf="vis.suppliers.length>0">
				<h2>Supplier</h2>
				<table class="tables">
					<tr>
						<th>Company</th>
						<th>Number of Flags</th>
					</tr>
					<tr *ngFor="let val of vis.suppliers">
						<td>
							<tender-body-line [body]="val.body" [link]="'/company/'+val.body.groupId"></tender-body-line>
						</td>
						<td>{{val.value| formatNumber}}</td>
					</tr>
				</table>
			</div>
			<div class="container-left-6" *ngIf="vis.buyers.length>0">
				<h2>Buyer</h2>
				<table class="tables">
					<tr>
						<th>Authority</th>
						<th>Number of Flags</th>
					</tr>
					<tr *ngFor="let val of vis.buyers">
						<td>
							<tender-body-line [body]="val.body" [link]="'/authority/'+val.body.groupId"></tender-body-line>
						</td>
						<td>{{val.value| formatNumber}}</td>
					</tr>
				</table>
			</div>
		</div>
	</section>

	<section class="container">
		<tender-table [search_cmd]="search_cmd" [columnIds]="columnIds" [title]="'Tenders'" (searchChange)="searchChange($event);"></tender-table>
	</section>

</section>
