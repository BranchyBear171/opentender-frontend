<section class="container-outer tender entity" *ngIf="tender">
	<section class="container">
		<div class="entity-title"><i class="icon-newspaper"></i> Tender</div>
		<h1>
			{{tender.title}}
		</h1>
		<h3>{{tender.titleEnglish}}</h3>
	</section>
	<!--<section class="container">-->
	<!--<div class="dropdown-choose pull-right">-->
	<!--<div class="dropdown-container">-->
	<!--<p class="dropdown-description">Details</p>-->
	<!--<p class="dropdown-button" ng-click="dropdown=!dropdown">Click to Select</p>-->
	<!--<ul class="dropdown-menu dropdown-select" ng-class="{'show-menu':dropdown}">-->
	<!--<li ng-repeat="col in all_columns" ng-bind="col.name" ng-click="toggleColumn(col)"></li>-->
	<!--</ul>-->
	<!--</div>-->
	<!--</div>-->
	<!--</section>-->

	<section class="container">
		<h3>
			<collapse-expand [o]="state.buyer" [title]="'Buyer'"></collapse-expand>
		</h3>
		<div *ngIf="state.buyer.$open" class="container slab-beta-light container-padded-large">
			<div class="container-left-6">
				<div *ngIf="tender.buyers | defined">
					<!--<h4>Authority</h4>-->
					<tender-body *ngFor="let authority of tender.buyers; let i = index" [body]="authority" [icon]="'icon-library'" [link]="'/authority/'+authority.groupId"></tender-body>
				</div>
			</div>
			<div class="container-left-6">
				<div *ngIf="tender.onBehalfOf | defined">
					<h4>On Behalf Of</h4>
					<tender-body [body]="tender.onBehalfOf"></tender-body>
				</div>
				<div *ngIf="tender.furtherInformationProvider | defined">
					<h4>Further Information Provider</h4>
					<tender-body [body]="tender.furtherInformationProvider"></tender-body>
				</div>
				<div *ngIf="tender.specificationsProvider | defined">
					<h4>Specifications Provider</h4>
					<tender-body [body]="tender.specificationsProvider"></tender-body>
				</div>
				<div *ngIf="tender.bidsRecipient | defined">
					<h4>Bids Recipient</h4>
					<tender-body [body]="tender.bidsRecipient"></tender-body>
				</div>
				<div *ngIf="tender.appealBodyName | defined">
					<h4>Appeal Body Name</h4>
					<div>{{tender.appealBodyName}}</div>
				</div>
				<div *ngIf="tender.mediationBodyName | defined">
					<h4>Mediation Body Name</h4>
					<div>{{tender.mediationBodyName}}</div>
				</div>
				<div *ngIf="tender.administrators | defined">
					<h4>Administrators</h4>
					<div *ngFor="let admin of tender.administrators; let i = index">
						<tender-body [body]="admin"></tender-body>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="container">
		<h3>
			<collapse-expand [o]="state.info" [title]="'Tender Information'"></collapse-expand>
		</h3>
		<div *ngIf="state.info.$open" class="container slab-beta-light container-padded-large">
			<div class="container-left-6">
				<!--<div class="info-foi" *ngIf="!tender.estimatedPrice || !tender.estimatedPrice.value">-->
				<!--No value is given for this contract, you may request it via your Freedom of Information Laws.<br/>-->
				<!--<a href="https://fragdenstaat.de/anfrage-stellen/">Request with FragDenStaat.de</a>-->
				<!--</div>-->
				<h4>Prices</h4>
				<div class="inline-info" *ngIf="tender.estimatedPrice | defined">
					<h4>Estimated Price</h4>
					<div>
						<tender-price [price]="tender.estimatedPrice"></tender-price>
					</div>
				</div>
				<div class="inline-info" *ngIf="tender.finalPrice | defined">
					<h4>Final Price</h4>
					<div>
						<tender-price [price]="tender.finalPrice"></tender-price>
					</div>
				</div>
				<div class="inline-info" *ngIf="tender.documentsPrice | defined">
					<h4>Documents Price</h4>
					<div>
						<tender-price [price]="tender.documentsPrice"></tender-price>
					</div>
				</div>
				<div *ngIf="(tender.estimatedStartDate && tender.estimatedCompletionDate && tender.bidDeadline && tender.documentsDeadline) | defined">
					<h4>Dates</h4>
					<div class="inline-info" *ngIf="tender.estimatedStartDate | defined">
						<h4>Estimated Start Date</h4>
						<div>{{tender.estimatedStartDate | formatDate}}</div>
					</div>
					<div class="inline-info" *ngIf="tender.estimatedCompletionDate | defined">
						<h4>Estimated Completion Date</h4>
						<div>{{tender.estimatedCompletionDate | formatDate}}</div>
					</div>
					<div class="inline-info" *ngIf="tender.bidDeadline | defined">
						<h4>Bid Deadline</h4>
						<div>{{tender.bidDeadline | formatDatetime}}</div>
					</div>
					<div class="inline-info" *ngIf="tender.documentsDeadline | defined">
						<h4>Documents Deadline</h4>
						<div>{{tender.documentsDeadline | formatDate}}</div>
					</div>
				</div>
			</div>
			<div class="container-left-6">
				<h4>Tender Dates</h4>
				<div class="inline-info" *ngIf="(tender.estimatedDurationInDays || tender.estimatedDurationInMonths || tender.estimatedDurationInYears) | defined">
					<h4>Estimated Duration</h4>
					<span>{{tender.estimatedDurationInDays}} Day(s)</span><br/>
					<span>{{tender.estimatedDurationInMonths}} Month(s)</span><br/>
					<span>{{tender.estimatedDurationInYears}} Year(s)</span><br/>
				</div>
				<div class="inline-info" *ngIf="tender.supplyType | defined">
					<h4>Supply Type</h4>
					<div>{{tender.supplyType | expandUnderlined}}</div>
				</div>
				<div class="inline-info" *ngIf="tender.procedureType | defined">
					<h4>Procedure Type</h4>
					<div>{{tender.procedureType | expandUnderlined}}</div>
				</div>
				<div class="inline-info" *ngIf="tender.selectionMethod | defined">
					<h4>Selection Method</h4>
					<div>{{tender.selectionMethod | expandUnderlined}}</div>
				</div>
				<div class="inline-info" *ngIf="tender.eligibleBidLanguages | defined">
					<h4>Eligible Bid Languages</h4>
					<div *ngIf="tender.eligibleBidLanguages"><span *ngFor="let s of tender.eligibleBidLanguages">{{s}}, </span></div>
				</div>
				<div class="inline-info" *ngIf="tender.maxBidsCount | defined">
					<h4>Max Bids Count</h4>
					<div>{{tender.maxBidsCount}}</div>
				</div>
				<div class="inline-info" *ngIf="tender.maxFrameworkAgreementParticipants | defined">
					<h4>Max Framework Agreement Participants</h4>
					<div>{{tender.maxFrameworkAgreementParticipants}}</div>
				</div>
				<div *ngIf="tender.awardCriteria | defined">
					<h4>Award Criteria</h4>
					<div *ngFor="let aw of tender.awardCriteria; let index_aw = index">
						<div class="inline-info">
							<h4>
								Nr. {{index_aw+1}} <span *ngIf="aw.weight | defined">: {{aw.weight}}%</span>
							</h4>
							{{aw.name}}
							<!--<span class="smaller" *ngIf="aw.isPriceRelated">(Price Related)</span>-->
						</div>
						<div>{{aw.description}}</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="container">
		<h3>
			<collapse-expand [o]="state.desc" [title]="'Description'"></collapse-expand>
		</h3>
		<div *ngIf="state.desc.$open" class="container slab-beta-light container-padded-large">
			<div class="container justify" *ngIf="tender.description | defined">
				<!--<h4>Description</h4>-->
				<span>{{tender.description}}</span>
			</div>
			<div class="container" *ngIf="tender.personalRequirements | defined">
				<h4>Personal Requirements</h4>
				<span>{{tender.personalRequirements}}</span>
			</div>
			<div class="container" *ngIf="tender.economicRequirements | defined">
				<h4>Economic Requirements</h4>
				<span>{{tender.economicRequirements}}</span>
			</div>
			<div class="container" *ngIf="tender.technicalRequirements | defined">
				<h4>Technical Requirements</h4>
				<span>{{tender.technicalRequirements}}</span>
			</div>
			<div class="container" *ngIf="tender.deposits | defined">
				<h4>Deposits</h4>
				<span>{{tender.deposits}}</span>
			</div>
		</div>
	</section>

	<section class="container" *ngIf="tender.lots | defined">
		<h3>
			<collapse-expand [o]="state.lots" [title]="'Lots'"></collapse-expand>
		</h3>
		<div *ngIf="state.lots.$open" class="container ">
			<div class="lot slab-beta-light container-padded-large" *ngFor="let lot of tender.lots; let index_l = index">
				<h4>
					<collapse-expand [o]="lot" [title]="'Lot '+(index_l+1)"></collapse-expand>
				</h4>
				<div [hidden]="lot.$open">
					<div class="margined-text" *ngIf="lot.title | defined">{{lot.title}}</div>
					<div class="grid" *ngIf="lot.bids | defined">
						<div [ngClass]="{'grid-item-2':lot.bids.length>1,'grid-item-1':lot.bids.length<=1}" *ngFor="let bid of lot.bids">
							<div class="margined-text" *ngIf="!lot.title && lot.description">{{lot.description}}</div>
							<div class="container container-padded-top-lite">
s								<div class="container-left-8">
									<div class="lot-bidder" *ngFor="let bidder of bid.bidders">
										<tender-body-line [body]="bidder" [icon]="'icon-office'" [link]="'/company/'+bidder.groupId"></tender-body-line>
									</div>
								</div>
								<div class="container-left-4">
									<div class="inline-info" *ngIf="bid.price | defined">
										<h4>Price</h4>
										<tender-price [price]="bid.price"></tender-price>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div [hidden]="!lot.$open">
					<div class="margined-text" *ngIf="lot.title | defined">{{lot.title}}</div>
					<div class="margined-text" *ngIf="lot.description | defined">{{lot.description}}</div>
					<div class="container container-padded-top-lite">
						<div class="container-left-4">
							<h4>Lot Details</h4>
							<div class="inline-info" *ngIf="lot.awardDecisionDate | defined">
								<h4>Award Decision Date</h4>
								{{lot.awardDecisionDate | formatDate}}
							</div>
							<div class="inline-info" *ngIf="lot.estimatedStartDate | defined">
								<h4>Estimated Start Date</h4>
								{{lot.estimatedStartDate | formatDate}}
							</div>
							<div class="inline-info" *ngIf="lot.estimatedCompletionDate | defined">
								<h4>Estimated Completion Date</h4>
								{{lot.estimatedCompletionDate | formatDate}}
							</div>
							<div class="inline-info" *ngIf="lot.estimatedPrice | defined">
								<h4>Estimated Price</h4>
								<tender-price [price]="lot.estimatedPrice"></tender-price>
							</div>
							<div class="inline-info" *ngIf="lot.bidsCount | defined">
								<h4>Bids Count</h4>
								{{lot.bidsCount}}
							</div>
							<div class="inline-info" *ngIf="lot.electronicBidsCount | defined">
								<h4>Electronic Bids Count</h4>
								{{lot.electronicBidsCount}}
							</div>
							<div class="inline-info" *ngIf="lot.contractNumber| defined">
								<h4>Contract Number</h4>
								{{lot.contractNumber}}
							</div>
							<div class="inline-info" *ngIf="lot.cpvs | defined">
								<h4>Cpvs</h4>
								<div *ngFor="let cpv of lot.cpvs">{{cpv.code}}</div>
							</div>
							<div class="inline-info" *ngIf="lot.lotNumber| defined">
								<h4>Lot Number</h4>
								{{lot.lotNumber}}
							</div>
							<div class="inline-info" *ngIf="lot.positionOnPage| defined">
								<h4>Position On Page</h4>
								{{lot.positionOnPage}}
							</div>
						</div>
						<div class="container-left-8">
							<h4>Bids</h4>
							<div *ngIf="lot.bids | defined">
								<div *ngFor="let bid of lot.bids">
									<div class="container-left-8">
										<div *ngFor="let bidder of bid.bidders">
											<div *ngIf="bid.bidders | defined">
												<tender-body [body]="bidder" [icon]="'icon-office'" [link]="'/company/'+bidder.groupId"></tender-body>
											</div>
										</div>
									</div>s
									<div class="container-left-4">
										<div class="inline-info" *ngIf="bid.price | defined">
											<h4>Price</h4>
											<tender-price [price]="bid.price"></tender-price>
										</div>
										<div class="inline-info" *ngIf="bid.isWinning | defined">
											<h4>Is Winning</h4>
											{{bid.isWinning}}
										</div>
										<div class="inline-info" *ngIf="bid.isSubcontracted | defined">
											<h4>Is Subcontracted</h4>
											{{bid.isSubcontracted}}
										</div>
										<div class="inline-info" *ngIf="bid.subcontractedValue | defined">
											<h4>Subcontacted Value</h4>
											<tender-price [price]="bid.subcontractedValue"></tender-price>
										</div>
										<div class="inline-info" *ngIf="bid.unitPrices | defined">
											<h4 *ngIf="bid.unitPrices.length>0">Unit Prices</h4>
											<div *ngFor="let uprice of bid.unitPrices">{{uprice.unitNumber}}</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="container" *ngIf="tender.publications | defined">
		<h3>
			<collapse-expand [o]="state.publications" [title]="'Publications'"></collapse-expand>
		</h3>
		<div *ngIf="state.publications.$open" class="container slab-beta-light container-padded-large">
			<div class="grid">
				<div [ngClass]="{'grid-item-3':tender.publications.length>2,'grid-item-2':tender.publications.length==2,'grid-item-1':tender.publications.length<=1}" class="grid-item-3"
					 *ngFor="let pub of tender.publications; let index_p=index">
					<h4>Nr. {{index_p + 1}}</h4>
					<div class="inline-info" *ngIf="pub.humanReadableUrl | defined">
						<h4>URL</h4>
						<a href="{{pub.humanReadableUrl}}">{{pub.humanReadableUrl | extractdomain}}</a>
					</div>
					<div class="inline-info" *ngIf="pub.publicationDate | defined">
						<h4>Publication Date</h4>
						{{pub.publicationDate | formatDate}}
					</div>
					<div class="inline-info" *ngIf="pub.dispatchDate | defined">
						<h4>Dispatch Date</h4>
						{{pub.dispatchDate | formatDate}}
					</div>
					<div class="inline-info" *ngIf="pub.formType | defined">
						<h4>Form Type</h4>
						{{pub.formType | expandUnderlined}}
					</div>
					<div class="inline-info" *ngIf="pub.sourceFormType | defined">
						<h4>Source Form Type</h4>
						{{pub.sourceFormType | expandUnderlined}}
					</div>
					<div class="inline-info" *ngIf="pub.language | defined">
						<h4>Language</h4>
						{{pub.language}}
					</div>
					<div class="inline-info" *ngIf="pub.sourceId | defined">
						<h4>Source Id</h4>
						{{pub.sourceId}}
					</div>
					<div class="inline-info" *ngIf="pub.buyerAssignedId | defined">
						<h4>Buyer Assigned Id</h4>
						{{pub.buyerAssignedId}}
					</div>
					<div class="inline-info" *ngIf="pub.isIncluded | defined">
						<h4>Is Included</h4>
						{{pub.isIncluded}}
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="container" *ngIf="tender.documents | defined">
		<h3>
			<collapse-expand [o]="state.documents" [title]="'Documents'"></collapse-expand>
		</h3>
		<div *ngIf="state.documents.$open" class="container slab-beta-light container-padded-large">
			<div class="container-left-4" *ngFor="let doc of tender.documents; let index_d=index">
				<h4>Nr. {{index_d}}</h4>
				<div class="inline-info" *ngIf="doc.url | defined">
					<h4>URL</h4>
					<a href="{{doc.url}}">{{doc.url | extractdomain}}</a>
				</div>
			</div>
		</div>
	</section>

	<section class="container">
		<h3>
			<collapse-expand [o]="state.additional" [title]="'Additional Information'"></collapse-expand>
		</h3>
		<div *ngIf="state.additional.$open" class="container slab-beta-light container-padded-large">
			<div class="container-left-4">
				<h4>Tender Information</h4>
				<div class="inline-info" *ngIf="tender.isEInvoiceAccepted | defined">
					<h4>isEInvoiceAccepted</h4>
					{{tender.isEInvoiceAccepted}}
				</div>
				<div class="inline-info" *ngIf="tender.isCentralProcurement | defined">
					<h4>isCentralProcurement</h4>
					{{tender.isCentralProcurement}}
				</div>
				<div class="inline-info" *ngIf="tender.isCoveredByGpa | defined">
					<h4>isCoveredByGpa</h4>
					{{tender.isCoveredByGpa}}
				</div>
				<div class="inline-info" *ngIf="tender.isJointProcurement | defined">
					<h4>isJointProcurement</h4>
					{{tender.isJointProcurement}}
				</div>
				<div class="inline-info" *ngIf="tender.isFrameworkAgreement | defined">
					<h4>isFrameworkAgreement</h4>
					{{tender.isFrameworkAgreement}}
				</div>
				<div class="inline-info" *ngIf="tender.isDps | defined">
					<h4>isDps</h4>
					{{tender.isDps}}
				</div>
				<div class="inline-info" *ngIf="tender.isDps | defined">
					<h4>isElectronicAuction</h4>
					{{tender.isElectronicAuction}}
				</div>
				<div class="inline-info" *ngIf="tender.hasLots | defined">
					<h4>hasLots</h4>
					{{tender.hasLots}}
				</div>
				<div class="inline-info" *ngIf="tender.hasOptions | defined">
					<h4>hasOptions</h4>
					{{tender.hasOptions}}
				</div>
				<div class="inline-info" *ngIf="tender.areVariantsAccepted | defined">
					<h4>areVariantsAccepted</h4>
					{{tender.areVariantsAccepted}}
				</div>
				<div class="inline-info" *ngIf="tender.buyerAssignedId | defined">
					<h4>Buyer Assigned ID</h4>
					{{tender.buyerAssignedId}}
				</div>
				<div class="inline-info">
					<h4>Cpvs</h4>
					<div *ngFor="let cpv of tender.cpvs">{{cpv.code}}</div>
				</div>
				<div *ngIf="tender.fundings | defined">
					<h4>Funding</h4>
					<div *ngFor="let funding of tender.fundings">
						<div class="inline-info" *ngIf="funding.programme | defined">
							<h4>Programme</h4>{{funding.programme}}
						</div>
						<div class="inline-info" *ngIf="funding.isEuFund | defined">
							<h4>Is EU-Fund</h4>{{funding.isEuFund}}
						</div>
					</div>
				</div>
			</div>
			<div class="container-left-8">
				<h4>Meta Data</h4>
				<div class="inline-info">
					<h4>ID</h4>
					<div>{{tender.id}}</div>
				</div>
				<div class="inline-info">
					<h4>Created</h4>
					<div>{{tender.created | formatDatetime}}</div>
				</div>
				<div class="inline-info">
					<h4>Modified</h4>
					<div>{{tender.modified | formatDatetime}}</div>
				</div>
			</div>
		</div>
	</section>

	<!--
		<section class="container-padded contract" *ngIf="portal">
			<div class="container-outer">
				<div class="container-left-12">
					<div class="action-cards">
						<div class="action-card" *ngIf="portal.foi">
							<h3 class="card-title"><i class="icon-mail2"></i> Freedom of Information</h3>
							<p>opentenderbout this tender with the Freedom of Information platform</p>
							<a class="button button-primary button-full-width" href="{{portal.foi.url}}" target="_blank"><b>{{portal.foi.name}}</b></a>
							<div class="card-content-subhead">2 FOI requests for this contract <a href="https://fragdenstaat.de">see here</a></div>
						</div>
						<div class="action-card">
							<h3 class="card-title"><i class="icon-bubbles3"></i> Discussion</h3>
							<p>Discuss this tender in the forum</p>
							<a class="button button-primary button-full-width" pageScroll="#discussion" (click)="state.discussion.$open=true;"><b>Tender Community at disqus.com</b></a>
							<div class="card-content-subhead">1 post for this contract</div>
						</div>
						<div class="action-card">
							<h3 class="card-title"><i class="icon-flag"></i> Report</h3>
							<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
							<a class="button button-primary button-full-width" target="_blank"><b>[NationalWhistleblowPlatform]</b></a>
							<div class="card-content-subhead">Well, well, well</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="container" *ngIf="tender" id="discussion">
			<h3>
				<collapse-expand [o]="state.discussion" [title]="'Discussion'"></collapse-expand>
			</h3>
			<div *ngIf="state.discussion.$open">
				<i class="icon-warning red"></i>
				Under Construction
				<disqus [shortname]="'opentender'" [identifier]="'beta-'+tender.id"></disqus>
			</div>
		</section>
	-->

	<section class="container" *ngIf="tender_raw">
		<h3>
			<collapse-expand [o]="state.raw" [title]="'Raw Data'"></collapse-expand>
		</h3>
		<div *ngIf="state.raw.$open" class="container slab-beta-light container-padded-large">
			<pre>{{tender_raw}}</pre>
		</div>
	</section>

</section>
