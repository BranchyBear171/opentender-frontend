<section class="container-outer sector entity" *ngIf="!sector">
	<section class="container">
		<div class="entity-title"><i class="icon-hammer icon-large"></i> <ng-container i18n>Sector</ng-container></div>
		<div i18n>Loading…</div>
	</section>
</section>

<section class="container-outer sector entity" *ngIf="sector">
	<section class="container">
		<div class="entity-title"><i class="icon-hammer icon-large"></i> <ng-container i18n>Sector</ng-container></div>
	</section>

	<section class="container container-margin">
		<div *ngIf="parent_sectors.length>0" class="pull-right">
			<div class="title"><ng-container i18n>Parent Sectors</ng-container>:</div>
			<div *ngFor="let val of parent_sectors"><a [routerLink]="'/sector/'+val.id">{{val.name}} (CPV {{val.id}})</a></div>
		</div>

		<h2>{{sector.name}} (CPV {{sector.id}})</h2>
		<div *ngIf="filter.time">
			<slider
					[min]="filter.time.startYear"
					[max]="filter.time.endYear"
					[startValue]="filter.time.startYear"
					[endValue]="filter.time.endYear"
					stepValue="1"
					defaultWidth="934"
					(onSliderChange)="onSliderChange($event)"></slider>
		</div>
	</section>

	<div [ngClass]="{'is-loading': loading>0}">

		<section class="container" *ngIf="viz.subsectors && viz.subsectors.length>0">
			<div class="container">
				<div class="container-left-12">
					<graph sector-treemap [data]="viz.subsectors"></graph>
				</div>
			</div>
		</section>
		<section class="container container-margin">
			<div class="container">
				<div class="container-left-6">
					<graph indicator-histogram [data]="viz.histogram.data" [title]="viz.histogram.title"></graph>
				</div>
				<div class="container-left-6">
					<div *ngIf="viz.cpvs_codes.data">
						<graph sectors [data]="viz.cpvs_codes.data" [title]="viz.cpvs_codes.title"></graph>
					</div>
				</div>
			</div>
		</section>
		<section class="container container-margin">
			<div class="container">
				<div class="container-left-6">
					<graph companies [data]="viz.top_companies"></graph>
				</div>
				<div class="container-left-6">
					<graph authorities [data]="viz.top_authorities"></graph>
				</div>
			</div>
			<div class="container">
				<div class="container-left-6" *ngIf="viz.subsectors && viz.subsectors.length>0">
					<h2 i18n>Subsectors</h2>
					<table class="tables">
						<tr>
							<th i18n>Subsector</th>
							<th i18n>Nr. of Contracts</th>
							<th i18n>Volume of Contracts</th>
						</tr>
						<tr *ngFor="let val of viz.subsectors">
							<td>
								<a [routerLink]="'/sector/'+val.sector.id">{{val.sector.name}}</a>
							</td>
							<td>{{val.sector.value| formatNumber}}</td>
							<td>€ {{val.stats.sums_finalPrice['EUR'] | formatCurrencyValue}}</td>
						</tr>
					</table>
				</div>
				<div class="container-left-6">
				</div>
			</div>
		</section>
		<section class="container">
			<tender-table [search_cmd]="search_cmd" [columnIds]="columnIds" [title]="tableTitle" (searchChange)="searchChange($event);"></tender-table>
		</section>
	</div>

</section>

